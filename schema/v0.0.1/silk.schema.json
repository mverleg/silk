{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "https://silk.markv.nl/v0.0.1.json",
  "title": "Silk",
  "description": "Cross-database relational database schema format",
  "type": "object",
  "properties": {
    "silk_version": {
      "description": "The semantic version of Silk that this data schema is exported in",
      "type": "string",
      "minLength": 5,
      "maxLength": 14,
      "pattern": "^(?:0|[1-9]\\d*)\\.(?:0|[1-9]\\d*)\\.(?:0|[1-9]\\d*)$"
    },
    "db": { "$ref":  "#/definitions/db" },
    "table": { "$ref":  "#/definitions/table" },
    "additionalProperties": false
  },
  "definitions": {
    "db": {
      "properties": {
        "name": { "type": "string" },
        "description": { "type": "string" },
        "tables": {
          "description": "The tables in the database",
          "type": "array",
          "items": { "$ref":  "#/definitions/table" }
        },
        "database_type": { "type": "string" },
        "database_specific": { "type": "object" }
      },
      "additionalProperties": false
    },
    "table": {
      "additionalProperties": false
    }
  },
  "oneOf": [
      { "required": ["silk_version", "db"] },
      { "required": ["silk_version", "table"] }
  ]
}
